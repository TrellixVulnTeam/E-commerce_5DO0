{% extends 'shop/basic.html' %}
{% block title %} shop {% endblock %}
{% load static %}
{% block css %}
.col-md-3{
display: inline-block;
margin-left: -4px;
}
.col-md-3 img{
width: 200px;
height: 200px;
padding: 14px;
}
body .carousel-indicators li{
background-color: ;
}
body .carousel-indicators {
bottom: 0;
}
.carousel-indicators .active{
background-color: blue;
}
body .carousel-control-prev-icon,
body .carousel-control-next-icon{
background-color: ;
}
.carousel-control-prev,
.carousel-control-next{
top: auto;
bottom: auto;
padding-top: 180px;
}
body .no-padding{
padding-left: 0;
padding-right: 0;
}
/*------- header --------*/
#header{
background-image:linear-gradient(rgba(0,0,0,0.2),rgba(0,0,0,0.2)) , url('{% static "shop/head.jpg" %}');
min-height: calc(100vh - 94px);
background-position: center;
background-size: cover;
background-attachment: fixed;
background-repeat: no-repeat;
position: relative;
}
.height{
min-height: calc(100vh - 94px);
}
.banner h3{
font-family: 'Gelasio', serif;
color: #333232;
margin-top: 60px;
border-top: 3px dotted #4C5760;
border-bottom: 3px dotted #4C5760;
animation: fromleft;
animation-duration: 4s;
animation-delay: 1s;
opacity: 0;
animation-fill-mode: forwards;
}
@keyframes fromleft{
0%{transform: translateX(-100px); opacity: 0;}
50%{transform: translateX(40px);}
100%{transform: translateX(0 px); opacity: 1;}
}
.main-btn{
color: #333232;
font-size: 2rem;
border: 2px solid #282828;
transition: all 2s ease-in-out;
}
.animation-main-btn{
animation: fromright;
animation-duration: 4s;
animation-delay: 1s;
opacity: 0;
animation-fill-mode: forwards;
}
@keyframes fromright{
0%{transform: translateX(100px); opacity: 0;}
50%{transform: translateX(-40px);}
100%{transform: translateX(0 px); opacity: 1;}
}
.main-btn:hover{
color: #494368;
border: 2px solid #494368;
background: #F1E4E8;
}
/*------- end header --------*/
/*------- footer --------*/

#footer-area{
  padding: 90px 0 60px 0;
  background: #262626;
  color: #fff;
}
.footer-widget{
background-color: ;
margin: 0 10px;
text-align: justify;
}
.widget-title{
color: #fff;
margin-bottom: 30px;
text-transform: uppercase;
text-size: 20px;
}
.about-widget p{
line-height: 20px;
margin: 10px 0 30px 0;
}
.about-widget p span{
margin-right: 10px;
}
.cards{
display: inline-block;
font-size: 30px;
margin-right: 12px;
}
.Information-widget, .categories-widget{
margin-left: 50px;
}
.footer-widget ul{
margin-left: 20px;
}
.footer-widget ul li{
padding-bottom: 14px;
}
.footer-widget ul li a{
color: #aba8a8;
text-decoration: none;
}
.footer-widget ul li a:hover{
color: #d2d2d2;
margin-left: 10px;
transition: all .5s ease;
}
.contact-address{
padding-bottom: 20px;
border-bottom: 1px solid #9a98988c;
line-height: 20px;
}
.contact-number, .contact-email{
margin: 10px 0;
}
.contact-address i, .contact-number i, .contact-email i{
margin-right: 10px;
}
.socail-widget a{
display: inline-block;
font-size: 28px;
color: #aba8a8;
margin-right: 10px;
}
.socail-widget a:hover{
color: #d2d2d2;
transition: all .5s ease;
}
.copyright{
background-color: #000;
padding: 10px;
}
.copyright p{
color: #d2d2d2;
text-align: center;
}

.copyright-area{
  background: #000;
  padding: 30px 0;
  margin-top: 30px;
  border-radius: 5px;
}

.copyright-area p{
  font-weight: ;
  color: #fafafa;
}


/*
#footer-area{
  padding: 90px 0 60px 0;
  background: #262626;
  color: #fff;
}

.footer-social{
  margin-top: 20px;
}

.single-footer h3{
  font-weight: 500;
  margin-bottom: 25px;
  color: #fafafa;
  font-family: Merienda !important;
}

.link li{
  padding: 5px 5px 5px 0;
  list-style: none;
}

.link li a{
  text-transform: capitalize;
  color: #ddd;
  font-family: Merienda !important;
}

.link li a i{
  margin-right: 10px;
  color: #ddd;
}

.link{
  padding: 0;
}

.single-footer p{
  font-family: Merienda;
}

.single-footer li a{
  width: 30px;
  height: 30px;
  display: inline-block !important;
  background: #000;
}

.single-footer li a i{
  color: #fff;
  padding: 8px;
}

.copyright-area{
  background: #000;
  padding: 30px 0;
  margin-top: 30px;
  border-radius: 5px;
}

.copyright-area p{
  font-weight: 600;
  color: #fafafa;
}*/

/*------- end footer --------*/
{% endblock %}
{% block body %}
<!-- header -->
<header id="header">
    <div class="container">
        <div class="row height align-items-center justify-content-center">
            <div class="col">
                <div class="banner text-center">
                    <h3 class="display-3 w-50 mx-auto text-capitalize">
                      join with us
                       <!--   <small class="primary-color2">join with us</small> <strong class="primary-color2"></strong>-->
                    </h3>
                    <a href="#" class="btn main-btn animation-main-btn my-4 text-capitalize" data-toggle="modal" data-target="#RegisterModal">REGISTER</a>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- end header -->
<!-- Button trigger modal -->
<!--<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#signupModal">
  REGISTER
</button>-->
<!-- Register Modal -->
<div class="modal fade" id="RegisterModal" tabindex="-1" role="dialog" aria-labelledby="RegisterModal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="RegisterModalLabel">REGISTER HERE</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action='/shop/signup/' method='post' onsubmit="return validation()"> {% csrf_token %}
                    <div class="form-group">
                        <label for="username">User Name<span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="username" name="username" placeholder="Enter unique user name ( lowercase & alphanumaric)">
                        <span id="user" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label for="fname">First Name<span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="fname" name="fname" placeholder="Enter First Name">
                        <span id="userf" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label for="lname">Last Name<span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="lname" name="lname" placeholder="Enter Last Name">
                        <span id="userl" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label for="email">Email address<span class="text-danger">*</span></label>
                        <input type="email" class="form-control" id="email" name="email" placeholder="Enter email">
                        <span id="useremail" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label for="pass1">Password<span class="text-danger">*</span></label>
                        <input type="password" class="form-control" id="pass1" name="pass1" placeholder="Enter Password">
                        <span id="userpass1" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label for="pass2">Confirm Password<span class="text-danger">*</span></label>
                        <input type="password" class="form-control" id="pass2" name="pass2" placeholder="Enter Password Again">
                        <span id="userpass2" class="text-danger"></span>
                    </div>
                    <button type="submit" name="submit" value="submit" class="btn btn-success">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <!-- slide show start here -->
    {% for product, range, nslides in allprods %}
    <h5 class="my-4 primary-color"> Flash Sale On <b>{{product.0.category}}</b> - Recommended Items</h5>
    <div class="row">
        <div id="demo{{forloop.counter}}" class="col carousel slide my-3" data-ride="carousel">
            <ul class="carousel-indicators">
                <li data-target="#demo{{forloop.counter}}" data-slide-to="0" class="active"></li>
                {% for i in range %}
                <li data-target="#demo{{forloop.parentloop.counter}}" data-slide-to="{{i}}"></li>
                {% endfor %}
            </ul>
            <div class="container carousel-inner no-padding">
                <div class="carousel-item active">
                    {% for i in product %}
                    <div class="col-xs-3 col-sm-3 col-md-3">
                        <div class="card align-items-center" style="width: 18rem;">
                            <img src='/media/{{i.image}}' class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title" id="namepr{{i.id}}">{{i.product_name|slice:"0:20"}}</h5>
                                <p class="card-text">{{i.desc|slice:"0:20"}}...</p>
                                <h6 class="card-title">Price: <span id="pricepr{{i.id}}">{{i.price}}.00</span></h6>
                                <span id="divpr{{i.id}}" class="divpr">
                                    <button id="pr{{i.id}}" class="btn btn-primary cart">Add To Cart</button>
                                </span>
                                <a href="/shop/products/{{i.id}}"><button id="qv{{i.id}}" class="btn btn-primary cart">QuickView</button></a>
                            </div>
                        </div>
                    </div>
                    {% if forloop.counter|divisibleby:4 and forloop.counter > 0 and not forloop.last %}
                </div>
                <div class="carousel-item ">
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- left and right control for slide -->
        <a class="carousel-control-prev" href="#demo{{forloop.counter}}" data-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </a>
        <a class="carousel-control-next" href="#demo{{forloop.counter}}" data-slide="next">
            <span class="carousel-control-next-icon"></span>
        </a>
    </div>
    {% endfor %}
</div>
</div>
<!-- footer -->

<footer>
 <div id="footer-area">
   <div class="container">
    <div class="row">
      <div class="col-md-4 col-sm-6">
        <div class="footer-widget Categories-widget">
          <h2 class="widget-title">Categories</h2>
                    <ul>
                        <li><a href="/shop/manfashion">Man's Fashion</a></li>
                        <li><a href="/shop/girlfashion">Women Fashion</a></li>
                        <li><a href="/shop/computer">Computer</a></li>
                        <li><a href="/shop/electronic">Electronic</a></li>
                    </ul>
        </div> 
      </div>

       <div class="col-md-4 col-sm-6">
        <div class="footer-widget Information-widget">
        <h2 class="widget-title">Information</h2>
         <ul>
          <li><a href="/shop/about">About Us</a></li>
          <li><a href="/shop/contact">Contact Us</a></li>
          <li><a href="/shop/tracker">Tracker Your Order</a></li>
          <li>
             <div class="cards">
                   <i class="fab fa-cc-paypal"></i>
              </div>
          </li>
        </div>
       </div>

       <div class="col-md-4 col-sm-6">
        <div class="footer-widget">
                    <h2 class="widget-title">Contact</h2>
                    <div class="contact-address">
                        <i class="fas fa-map-marker-alt"></i> Address : Agriculture University Peshawar
                    </div>
                    <div class="contact-number">
                        <i class="fas fa-mobile-alt"></i> Phone : +91 234567890
                    </div>
                    <div class="contact-email">
                        <i class="fas fa-envelope"></i> Email : Contact@gmail.com
                    </div>
                    <div class="socail-widget">
                        <a href="https://web.facebook.com/" target="blank"><i class="fab fa-facebook-square"></i></a>
                        <a href="https://accounts.google.com/" target="blank"><i class="fab fa-google-plus-square"></i></a>
                        <a href="https://www.instagram.com/" target="blank"><i class="fab fa-instagram"></i></a>
                        <a href="https://twitter.com/" target="blank"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.youtube.com/" target="blank"><i class="fab fa-youtube-square"></i></a>
                    </div>
                </div>
      </div>
    </div>
  </div>

   <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="copyright-area text-center">
          <p>copyright &copy; 2020 | all rights reserved</p>
        </div>
        
      </div>
      
    </div>
    
  </div>
</div>
</footer>

<!--
<footer>
    <div class="container wrap ">
        <div class="row">
            <div class="col-md-3 col-sm-6">
                <div class="footer-widget about-widget">
                    <h2 class="widget-title">About</h2>
                    <p>kjdjs djs dffjn slksal kdskjd this is a good </p>
                    <div class="cards">
                        <i class="fab fa-cc-paypal"></i>
                    </div>
                    <p><span><i class="fas fa-lock"></i></span> Secure Online Payment</p>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="footer-widget Categories-widget">
                    <h2 class="widget-title">Categories</h2>
                    <ul>
                        <li><a href="/shop/manfashion">Man's Fashion</a></li>
                        <li><a href="/shop/girlfashion">Women Fashion</a></li>
                        <li><a href="/shop/computer">Computer</a></li>
                        <li><a href="/shop/electronic">Electronic</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="footer-widget Information-widget">
                    <h2 class="widget-title">Information</h2>
                    <ul>
                        <li><a href="/shop/about">About Us</a></li>
                        <li><a href="/shop/contact">Contect Us</a></li>
                        <li><a href="#">Term & conditon</a></li>
                        <li>
                            <div class="cards">
                                <i class="fab fa-cc-paypal"></i>
                            </div>
                        </li>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="footer-widget">
                    <h2 class="widget-title">Contact</h2>
                    <div class="contact-address">
                        <i class="fas fa-map-marker-alt"></i> Address : Agriculture University Peshawar
                    </div>
                    <div class="contact-number">
                        <i class="fas fa-mobile-alt"></i> Phone : +91 234567890
                    </div>
                    <div class="contact-email">
                        <i class="fas fa-envelope"></i> Email : Contact@gmail.com
                    </div>
                    <div class="socail-widget">
                        <a href="#"><i class="fab fa-facebook-square"></i></a>
                        <a href="#"><i class="fab fa-google-plus-square"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-youtube-square"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</footer>
<div class="copyright">
    <div class="container">
        <p>copyright @ | all rights reserved</p>
    </div>
</div>-->

<!--  
<footer>
 <div id="footer-area">
   <div class="container">
    <div class="row">
      <div class="col-md-4 col-sm-6">
        <div class="single-footer">
          <h3>About</h3>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius doloremque laborum sapiente libero autem necessitatibus blanditiis quisquam doloribus dolor molestias corporis a quam eum nisi, ea voluptate, praesentium iste saepe.</p>
          <ul class="footer-social list-inline">
            <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
            <li><a href="#"><i class="fab fa-twitter"></i></a></li>
            <li><a href="#"><i class="fab fa-instagram"></i></a></li>
            <li><a href="#"><i class="fab fa-youtube"></i></a></li>
          </ul>
        </div> 
      </div>

      <div class="col-md-4 col-sm-6">
        <div class="single-footer">
          <h3>Categories</h3>
          <ul class="link">
            <li><a href="#"><i class="fas fa-arrow-right"></i>home</a></li>
            <li><a href="#"><i class="fas fa-arrow-right"></i>home</a></li>
            <li><a href="#"><i class="fas fa-arrow-right"></i>home</a></li>
            <li><a href="#"><i class="fas fa-arrow-right"></i>home</a></li>
          </ul>
        
        </div>
      </div> 

       <div class="col-md-4 col-sm-6">
        <div class="single-footer">
          <h3>Contact</h3>
          <ul class="link">
            <li><a href="#"><i class="fas fa-mobile-alt"></i>Phone : +91 234567890</a></li>
            <li><a href="#"><i class="fas fa-envelope"></i>Email : Contact@gmail.com</a></li>
            <li><a href="#"><i class="fas fa-map-marker-alt"></i> Address : Agriculture University Peshawar</a></li>
            <li><a href="#"><i class="fa fa-long-arrow-right"></i></a></li>
          </ul>
        
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="copyright-area text-center">
          <p>&copy; 2020, All Right Reserved</p>
        </div>
        
      </div>
      
    </div>
    
  </div>
 </div> 
</footer>-->


{% block footer %}  {% endblock %}
<!-- end footer -->
{% endblock %}
{% block js %}
<script type="text/javascript" charset="utf-8">
// Find out cart items from localstorage
if (localStorage.getItem('cart') == null) {
    var cart = {};
} else {
    cart = JSON.parse(localStorage.getItem('cart'));
    updateCart(cart);
}


// If (Add to cart) button is clicked then add items to cart
$('.cart').click(function() {
    var idstr = this.id.toString();
    if (cart[idstr] != undefined) {
        qty = cart[idstr][0] + 1;
    } else {
        qty = 1;
        name = document.getElementById('name' + idstr).innerHTML;
        price = document.getElementById('price' + idstr).innerHTML;
        cart[idstr] = [qty, name, parseInt(price)];
    }
    updateCart(cart);

});


// Add popover to cart
$('#popcart').popover();
updatePopover(cart);

// If click on plus or minus button update popover
function updatePopover(cart) {
    var popstr = "";
    popstr = popstr + "<h5>Your Items In Cart!</h5><div class='mx-2 my-2'>";
    var i = 1;
    for (var item in cart) {
        popstr = popstr + "<b>" + i + "</b>. ";
        popstr = popstr + document.getElementById('name' + item).innerHTML.slice(0, 17) + "...Qty: " + cart[item][0] + '<br>';
        i = i + 1;
    }
    popstr = popstr + "</div> <a href='/shop/checkout'><button class='btn btn-primary' id='checkout'>Checkout</button></a> <button class='btn btn-danger' onclick='clearCart()' id='clearCart'>Clear Cart</button> ";
    document.getElementById('popcart').setAttribute('data-content', popstr);
    $('#popcart').popover('show');
    //$.fn.tooltip.Constructor.Default.whiteList.button = []
}

// Add clearcart button to cart
function clearCart() {
    cart = JSON.parse(localStorage.getItem('cart'));
    for (var item in cart) {
        document.getElementById('div' + item).innerHTML = '<button id="' + item + '" class="btn btn-primary cart">Add To Cart</button>'
    }
    localStorage.clear();
    cart = {};
    updateCart(cart);
}
// Add plus and minus button to cart
function updateCart(cart) {
    var sum = 0;
    for (var item in cart) {
        sum = sum + cart[item][0];
        document.getElementById('div' + item).innerHTML = "<button id='minus" + item + "' class='btn btn-primary minus'>-</button> <span id='val" + item + "''>" + cart[item][0] + "</span> <button id='plus" + item + "' class='btn btn-primary plus'>+</button>";
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    document.getElementById('cart').innerHTML = sum;
    updatePopover(cart);
}

// If plus or minus button are clicked then update the cart
$('.divpr').on("click", "button.minus", function() {
    a = this.id.slice(7, );
    console.log(a);
    cart['pr' + a][0] = cart['pr' + a][0] - 1;
    cart['pr' + a][0] = Math.max(0, cart['pr' + a][0]);
    document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
    if (cart['pr' + a][0] == 0) {
        document.getElementById('divpr' + a).innerHTML = '<button id="pr' + a + '" class="btn btn-primary cart">Add To Cart</button>';
        delete cart['pr' + a];
    } else {
        document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
    }
    updateCart(cart);
});

$('.divpr').on("click", "button.plus", function() {
    a = this.id.slice(6, );
    cart['pr' + a][0] = cart['pr' + a][0] + 1;
    document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
    updateCart(cart);
});




//form validation

function validation() {
    var user = document.getElementById('username').value;
    var firstname = document.getElementById('fname').value;
    var lastname = document.getElementById('lname').value;
    var email = document.getElementById('email').value;
    var fpass1 = document.getElementById('pass1').value;
    var conpass2 = document.getElementById('pass2').value;


    if (user == "") {
        document.getElementById('user').innerHTML = "** please fill the username field";
        return false;
    }
    if ((user.length <= 4) || (user.length > 10)) {
        document.getElementById('user').innerHTML = "** username must be between 5 & 10";
        return false;
    }
    if (!isNaN(user)) {
        document.getElementById('user').innerHTML = "** username must be digits & characters";
        return false;
    }





    if (firstname == "") {
        document.getElementById('userf').innerHTML = "** please fill the firstname field";
        return false;
    }

    if (lastname == "") {
        document.getElementById('userl').innerHTML = "** please fill the lastname field";
        return false;
    }




    if (email == "") {
        document.getElementById('useremail').innerHTML = "** please fill the email field";
        return false;
    }
    if (email.indexOf('@') <= 0) {
        document.getElementById('useremail').innerHTML = "** @ invalid position";
        return false;
    }
    if ((email.chatAt(email.length - 4) != '.') && (email.chatAt(email.length - 3) != '.')) {
        document.getElementById('useremail').innerHTML = "** . invalid position";
        return false;
    }






    if (fpass1 == "") {
        document.getElementById('userpass1').innerHTML = "** please fill the password field";
        return false;
    }
    //if ((fpass1.length <= 8) || (fpass1.length > 10)){
    //document.getElementById('userpass1').innerHTML="** password must be between 8 & 10";
    //return false;
    // }
    //if (fpass1 != conpass2){
    // document.getElementById('userpass2').innerHTML="** password are not matching";
    //return false;
    //}



    if (conpass2 == "") {
        document.getElementById('userpass2').innerHTML = "** please fill the confirmpassword field";
        return false;
    }







}
</script>
{% endblock %}